{"version":3,"sources":["components/survey/results.js"],"names":["Results","props","processIncomingData","data","accounts","results","reduce","prev","current","account","creator","currentEntry","email","firstname","firstName","surname","stars","lastTimeSubmitted","timeSubmitted","index","rating","isThereIndex","findIndex","element","array","i","push","computeRanking","sort","a","b","score","map","item","rank","pay","getPay","participant","computeStarScore","totalScore","length","getStarIcon","width","height","position","top","left","bottom","getParticipantLine","participantLine","display","minWidth","paddingTop","fontSize","textAlign","number","starType","padding","paddingLeft","marginLeft","marginRight","reverse","state","groupType","currentUserEmail","gatherData","isSubmitted","submit","nextProps","console","log","setState","ideas","text","addTodo","textColor","context","muiTheme","palette","title","margin","color","marginTop","contextTypes","PropTypes","object","isRequired","router","websocket","propTypes","mapStateToProps","task","payload"],"mappings":"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","file":"results.js","sourcesContent":["import React, { PropTypes, Component } from 'react'\n\n\nimport {Card, CardActions, CardHeader, CardMedia, CardTitle, CardText} from 'material-ui/Card';\n\nimport TextField from 'material-ui/TextField';\nimport FlatButton from 'material-ui/FlatButton';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\nimport Slider from 'material-ui/Slider';\nimport {RadioButton, RadioButtonGroup} from 'material-ui/RadioButton';\n\n\nimport { connect } from 'react-redux'\n\nimport Wait from './wait'\n\nimport {\n ActionShop,\n ActionShoppingBasket,\n ActionSpeakerNotesOff,\n ActionSpeakerNotes,\n ActionSpellcheck,\n ActionStars,\n ActionStore,\n ToggleStar,\n ToggleStarBorder,\n} from 'material-ui/svg-icons';\n\n\n // need to set the current user email here for the attribution variable. (type 0 and 2)\n\nclass Results extends Component {\n\n  constructor(props) {\n    super(props);\n    this.isSubmitted = false;\n    this.state = {data : null, groupType: -1, currentUserEmail: '', accounts : {}};\n  }\n\n  static contextTypes = {\n    muiTheme: React.PropTypes.object.isRequired,\n    router: React.PropTypes.object.isRequired,\n    websocket: React.PropTypes.object,\n  };\n\n\n  componentWillReceiveProps(nextProps) {\n    console.log(\"nextProps vienen pa ca\")\n    console.log(nextProps)\n    this.setState({\n      groupType: nextProps.groupType,\n      currentUserEmail : nextProps.account.email,\n      accounts : nextProps.accounts,\n      data : this.processIncomingData(nextProps.ideas, nextProps.accounts) || []\n    });\n\n  }\n\n  processIncomingData = (data, accounts) =>{\n\n\n        if( data == null ){\n          return\n        }\n\n        var results = data.reduce(\n          (prev, current) => {\n                let account = accounts[current.creator]\n                var currentEntry = { account : {email: current.creator, firstname: account.firstName, surname: account.surname }, stars: [0,0,0,0,0], lastTimeSubmitted: current.timeSubmitted }\n                var index = (current.rating[0] || 0) -1\n                if ( index > -1 )\n                    currentEntry.stars[index] = 1;\n                    var isThereIndex = prev.findIndex( (element, index, array)=>{ return element.account.email == currentEntry.account.email})\n                if ( isThereIndex > -1 ){\n\n                    for ( var i in currentEntry.stars ){\n                      prev[isThereIndex].stars[i] = prev[isThereIndex].stars[i] + currentEntry.stars[i]\n                    }\n\n                    if ( prev[isThereIndex].lastTimeSubmitted < currentEntry.lastTimeSubmitted ){\n                        prev[isThereIndex].lastTimeSubmitted = currentEntry.lastTimeSubmitted;\n                    }\n\n                } else {\n                  prev.push(currentEntry);\n                }\n                return prev;\n          },\n          []\n        );\n\n        var data = results;\n        this.computeRanking(data);\n\n\n\n        data.sort(function(a, b){\n          if ( b.score-a.score == 0){\n            if ( b.stars[4]-a.stars[4] == 0){\n              if ( b.stars[3]-a.stars[3] == 0){\n                if ( b.stars[2]-a.stars[2] == 0){\n                  if ( b.stars[1]-a.stars[1] == 0){\n                    if ( b.stars[0]-a.stars[0] == 0){\n                      return a.lastTimeSubmitted - b.lastTimeSubmitted;\n                    }else { return b.stars[0]-a.stars[0] }\n                  } else { return b.stars[1]-a.stars[1] }\n                } else { return b.stars[2]-a.stars[2] }\n              } else { return b.stars[3]-a.stars[3] }\n            } else { return b.stars[4]-a.stars[4] }\n          } else { return b.score-a.score }\n        });\n\n        data.map((item,i) => {item.rank = (i+1); item.pay = this.getPay(i+1);});\n\n      return data;\n  }\n\n  getPay = (i) => {\n    switch (i) {\n      case 1:\n        return 5;\n      case 2:\n        return 2;\n      case 3:\n        return 1;\n      case 4:\n        return 0.5;\n      case 5:\n        return 0;\n      default:\n        return 0;\n    }\n  }\n\n  // Function to compute the ranking of each participant and add to the object.\n  computeRanking = (data) =>{\n    data.map( (participant) => {participant.score = this.computeStarScore(participant.stars)});\n\n\n  }\n\n  computeStarScore = (stars) => {\n    var totalScore = 0;\n    for ( var i = 0; i < stars.length; i++){\n      totalScore +=  (i+1)*stars[i];\n    }\n    return totalScore\n  }\n\n\n  handleSave(text) {\n    if (text.length !== 0) {\n      this.props.addTodo(text)\n    }\n  }\n\n  getStarIcon = (i) => {\n    switch (i) {\n      case 1:\n          return <div style={{width: 22, height: 36}}>\n                    <ToggleStar style={{width:10,height:10, position:'relative', top: 8, left: 5}}/></div>\n      case 2:\n          return <div style={{width: 22, height: 36}}>\n                    <ToggleStar style={{width:10,height:10, position:'relative',top: 3,left:5}}/><br/>\n                    <ToggleStar style={{width:10,height:10, position:'relative',left:5,bottom:3}}/>\n                  </div>\n      case 3:\n          return <div style={{width: 22, height: 36}}>\n                  <ToggleStar style={{width:10,height:10, position:'relative', top: 3}}/>\n                  <ToggleStar style={{width:10,height:10, position:'relative', top: 3}}/><br/>\n                  <ToggleStar style={{width:10,height:10, position:'relative',left:5,bottom:3}}/>\n                 </div>\n      case 4:\n          return <div style={{width: 22, height: 36}}>\n                  <ToggleStar style={{width:10,height:10,position: 'relative', top: 3}}/>\n                  <ToggleStar style={{width:10,height:10,position: 'relative', top: 3}}/><br/>\n                  <ToggleStar style={{width:10,height:10,position: 'relative',bottom:3}}/>\n                  <ToggleStar style={{width:10,height:10,position: 'relative',bottom:3}}/>\n                 </div>\n      case 5:\n          return <div style={{width: 22, height: 36}}><ToggleStar style={{width:10,height:10}}/><ToggleStar style={{width:10,height:10}}/><br/>\n                      <ToggleStar style={{width:10,height:10}}/><ToggleStar style={{width:10,height:10}}/><br/>\n                      <ToggleStar style={{width:10,height:10, position:'relative', top: -24, left: 5}}/></div>\n      default:\n        return <div style={{width: 22, height: 36}}></div>\n    }\n\n  }\n\n  getParticipantLine = (participant,i) => {\n    var participantLine = <div key={i} style={{display:'flex',}}>\n                  <Card style={{minWidth:72, paddingTop: 10,}}><CardText style={{fontSize:'large',textAlign:'center'}}>{participant.rank}</CardText></Card>\n                  <Card style={{minWidth:300, paddingTop: 10,}}><CardText style={{fontSize:16}}>{participant.account.firstname +' '+ participant.account.surname} </CardText></Card>\n                  <Card style={{paddingTop: 10,}}>\n                        <CardText>\n                          <div style={{display:'flex'}}>{\n                            participant.stars.map( (number,starType) => {\n                                return <div key={starType} style={{display:'flex'}}>\n                                              {this.getStarIcon(starType+1)}\n                                            <div style={{ padding: 5, paddingLeft: 0, fontSize:'large',marginLeft:3, marginRight:4}}>\n                                              {number}\n                                            </div>\n                                       </div>\n                            }).reverse()\n                          }\n                          </div>\n                        </CardText></Card>\n                  <Card style={{minWidth:77, paddingTop: 10,}}><CardText style={{fontSize:'large',textAlign:'center'}}>{participant.score}</CardText></Card>\n                  { (this.state.groupType > 1) ? <Card style={{minWidth:75, paddingTop: 10,}}><CardText style={{fontSize:'large',textAlign:'center'}}>£{participant.pay}</CardText></Card> : '' }\n           </div>\n\n    if ( this.state.groupType == 0 || this.state.groupType == 2 ){\n      if ( this.state.currentUserEmail == participant.account.email ){\n        return participantLine;\n      }\n    }else {\n        return participantLine;\n    }\n\n  }\n\n  gatherData = () => {\n    if ( !this.isSubmitted ){\n      this.props.submit( this.state )\n      this.isSubmitted = true;\n    }\n  }\n\n//'_marker'\n  render() {\n\n    const { textColor } = this.context.muiTheme.palette;\n\n    let title = 'Results Summary';\n    let text = 'Here you can see you performance with respect to ther other participants within your group:';\n    let data = this.state.data;\n\n    if( data == null ){\n      return (<div></div>)\n    }\n\n    return (\n      <div>\n      {\n        // <h1>{message}</h1>\n        // <Wait melacome={<ActionShop />} /><ActionStore /> <ActionShop />\n        // <div> {this.props.firstName} {v} {this.mlk()}</div>\n\n      }\n\n\n          <Card\n            style={{\n              padding: 30,\n              margin: '2% 15% 15%',\n              minWidth: 900,\n            }}\n          >\n            <CardHeader\n              title={title}\n              titleStyle={{\n                fontSize: 24,\n                color: textColor,\n              }}\n            />\n            <CardText style={{ paddingTop: 0, }} >\n\n              {text}\n              <br/><br/>\n              <div style={{display:'flex',textAlign:'center'}}>\n                  <Card ><CardText style={{fontSize:'large'}}>Rank</CardText></Card>\n                  <Card style={{minWidth:300}}><CardText style={{fontSize:'large'}}>Participant</CardText></Card>\n                  <Card style={{minWidth:252}}><CardText style={{fontSize:'large'}}>Stars</CardText></Card>\n                  <Card><CardText style={{fontSize:'large'}}>Score</CardText></Card>\n                  { (this.state.groupType > 1) ? <Card style={{minWidth:75}}><CardText style={{fontSize:'large'}}>Pay</CardText></Card> : ''}\n              </div>\n\n                {\n\n                  data.map( (participant,i) => {\n\n                        return this.getParticipantLine(participant,i)\n\n                  })\n\n\n                }\n\n                <RaisedButton\n                  id=\"submitAnswers\"\n                  style={{color: 'rgb(124, 234, 127)',marginTop: 20, textAlign:'center'}}\n                  type=\"submit\"\n                  onClick= { this.gatherData }\n                >\n                  Continue\n                </RaisedButton>\n\n\n            </CardText>\n\n\n\n          </Card>\n\n      </div>\n    )\n  }\n}\n\nResults.propTypes = {\n  // addTodo: PropTypes.func.isRequired\n}\n\n//export default Question\n\nconst mapStateToProps = (state) => {\n  return {\n    account : state.account,\n    accounts : state.task.payload.accounts,\n    groupType : state.task.payload.groupType,\n    ideas: (state.task.payload) ? state.task.payload.ideas: [],\n  }\n}\n\nexport default connect(mapStateToProps)(Results)\n"]}