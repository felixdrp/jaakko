{"version":3,"sources":["components/admin/results/results-manager.js"],"names":["ResultsManager","state","_input","surveyxMonetaryTypeIndex","surveyxMonetaryTypeIndexType","accountsMonetary","accountsMonetaryTable","columnWidthStyle","props","storeSession","session","surveyPath","reduce","prev","element","index","type","push","map","surveyIndex","accounts","list","accountId","account","accountComponent","moneyData","taskNumber","total","email","width","firstName","surname","group","groups","results","surveyInfo","filter","includes","surveyId","forEach","current","index2","data","rank","score","pay","mathScore","surveyData","find","currentUserEmail","surveyType","marginLeft","style","gray","color","paddingBottom","propTypes","contextTypes","muiTheme","object","isRequired"],"mappings":"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","file":"results-manager.js","sourcesContent":["import React, { PropTypes, Component } from 'react'\n\n// groups\nimport {Card, CardActions, CardHeader, CardMedia, CardTitle, CardText} from 'material-ui/Card';\n\nimport {Table, TableBody, TableHeader, TableHeaderColumn, TableRow, TableRowColumn} from 'material-ui/Table';\n\n// import FlatButton from 'material-ui/FlatButton';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport Avatar from 'material-ui/Avatar';\n\nimport Class from 'material-ui/svg-icons/action/class';\nimport Language from 'material-ui/svg-icons/action/language';\nimport Group from 'material-ui/svg-icons/social/group';\nimport GroupAdd from 'material-ui/svg-icons/social/group-add';\nimport PersonOutline from 'material-ui/svg-icons/social/person-outline';\nimport DeveloperBoard from 'material-ui/svg-icons/hardware/developer-board';\n\n// Icons\n\nimport ShowChart from 'material-ui/svg-icons/editor/show-chart';\nimport LocalAtm from 'material-ui/svg-icons/maps/local-atm';\nimport Memory from 'material-ui/svg-icons/hardware/memory';\nimport ModeEdit from 'material-ui/svg-icons/editor/mode-edit';\nimport MoreVertIcon from 'material-ui/svg-icons/navigation/more-vert';\nimport NavigationClose from 'material-ui/svg-icons/navigation/close';\n//\n// import GeneralInfoContainer from './general-info-container';\n// import SessionTrackerContainer from './session-tracker-container';\n\n\nimport {\n\n} from '../../../websocket-message/server-actions'\n\nclass ResultsManager extends Component {\n  static propTypes = {\n    // groups: PropTypes.object,\n    // unassignedAccounts: PropTypes.object,\n  };\n\n  static contextTypes = {\n    muiTheme: PropTypes.object.isRequired,\n  };\n\n  constructor() {\n    super()\n    this.state = {\n\n    };\n\n    // Used to store references.\n    this._input = {};\n  }\n\n  render() {\n    let surveyxMonetaryTypeIndex = []\n    let surveyxMonetaryTypeIndexType = []\n    let accountsMonetary = []\n    let accountsMonetaryTable = []\n\n    let columnWidthStyle = '20%'\n\n    if ( this.props.storeSession && 'session' in this.props.storeSession ) {\n      surveyxMonetaryTypeIndex = this.props.storeSession.session.surveyPath.reduce(\n        (prev, element, index) => {\n          // The survey have a monetary value?\n          if (element.type == 'RESULTS' || element.type == 'MATH_RESULTS') {\n            prev.push( index )\n            return prev\n          }\n          return prev\n        },\n        []\n      )\n\n\n      surveyxMonetaryTypeIndexType = surveyxMonetaryTypeIndex.map( surveyIndex => this.props.storeSession.session.surveyPath[surveyIndex].type )\n\n      accountsMonetaryTable = this.props.storeSession.accounts.list.reduce(\n        ( prev, accountId, index ) => {\n          let account = this.props.storeSession.accounts[ accountId ]\n          let accountComponent = []\n          let moneyData = []\n          let taskNumber = 0\n          let total = 0\n\n          accountComponent.push(\n            <TableRowColumn key={ account.email + 0 } style={{ width: columnWidthStyle }}>\n              {account.firstName} {account.surname} Group {account.group}\n            </TableRowColumn>\n          )\n\n          accountComponent.push(\n            <TableRowColumn key={ account.email + 1 } style={{ width: 20 }}>\n              {this.props.storeSession.groups[account.group].type}\n            </TableRowColumn>\n          )\n\n\n          moneyData = this.props.storeSession.results.surveyInfo.filter(\n            (element) => element.accountId == accountId && surveyxMonetaryTypeIndex.includes( element.surveyId )\n          )\n\n          moneyData.forEach(\n            (current, index2) => {\n              let data\n              let rank = '_',\n                  score = '_',\n                  pay = 0,\n                  mathScore = -1\n\n              data = current.surveyData.data.find( (element) => element.account.email == current.surveyData.currentUserEmail )\n\n              if ( current.surveyType == 'RESULTS' ) {\n\n                if ( data ) {\n                  rank = 'rank' in data? data.rank: '_'\n                  score = 'score' in data? data.score: '_'\n                  pay = 'pay' in data? data.pay: 0\n                }\n\n                accountComponent.push(\n                  <TableRowColumn\n                    key={ account.email + index2 + 1 }\n                    style={{\n                      marginLeft: 10,\n                    }}\n                    // Task Round {taskNumber}\n                  >\n                    Rank {rank} Score {score} Pay {pay}\n                  </TableRowColumn>\n                )\n                taskNumber += 1\n                total += pay\n              } else {\n                if ( data ) {\n                  rank = 'rank' in data? data.rank: '_'\n                  mathScore = 'mathScore' in data? data.mathScore: '_'\n                  pay = 'pay' in data? data.pay: 0\n                }\n\n                // Math result\n                accountComponent.push(\n                  <TableRowColumn\n                    key={ account.email + index2 + 1 }\n                    style={{\n                      marginLeft: 10,\n                    }}\n                    // Math Round\n                  >\n                    Rank {rank} Score {mathScore} Pay {pay}\n                  </TableRowColumn>\n                )\n\n                // Total survey result\n                accountComponent.push(\n                  <TableRowColumn\n                    key={ account.email + index2 + 2 }\n                    style={{\n                      marginLeft: 10,\n                    }}\n                  >\n                    {total + pay}\n                  </TableRowColumn>\n                )\n              }\n            }\n          )\n\n          prev.push( <TableRow key={ index }> {accountComponent} </TableRow> )\n\n          return prev\n        },\n        []\n      )\n\n      accountsMonetaryTable = (\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHeaderColumn style={{ width: columnWidthStyle }}>Account Info</TableHeaderColumn>\n              <TableHeaderColumn style={{ width: 20 }}>Type</TableHeaderColumn>\n              {\n                surveyxMonetaryTypeIndexType.map(\n                  (type, index) => {\n                    if ( type == 'RESULTS' ) {\n                      return <TableHeaderColumn key={ 'task' + index }>Task Round { index }</TableHeaderColumn>\n                    } else {\n                      return <TableHeaderColumn key={ 'math' + index }>Math Round { index }</TableHeaderColumn>\n                    }\n                  }\n                )\n              }\n              <TableHeaderColumn>Total</TableHeaderColumn>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {\n              accountsMonetaryTable\n            }\n          </TableBody>\n        </Table>\n      )\n    }\n\n    const style = {\n      gray: {\n        color: '#565555'\n      }\n    }\n\n    return (\n      <Card\n        style={{\n          paddingBottom: 20,\n        }}\n      >\n        <CardHeader\n          title={ <span><ShowChart /> Results manager </span> }\n          subtitle=\"Results manager\"\n        />\n        <CardHeader\n          title={ <span><LocalAtm /> Results manager </span> }\n        />\n        {\n          // accountsMonetary\n        }\n        { accountsMonetaryTable }\n      </Card>\n    )\n  }\n}\n\nexport default ResultsManager\n"]}