{"version":3,"sources":["components/admin/groups/group-manager.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAGA;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AAIA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;AAEA;;;;AATA;;AATA;;IA0BM,Y;;;AAYJ,0BAAc;AAAA;;AAAA;;AAAA,UAcd,aAdc,GAcE,UAAE,SAAF,EAAa,qBAAb,EAAwC;AACtD,UAAI,eAAe,MAAK,KAAL,CAAW,gBAA9B;AACA,UAAI,WAAW,EAAf;AACA,UAAI,sBAAsB,OAA1B,EAAmC;AACjC;AACA,YAAI,aAAa,QAAb,CAAsB,SAAtB,CAAJ,EAAsC;AACpC,qBAAW,YAAX;AACA,mBAAS,MAAT,CAAiB,SAAS,OAAT,CAAiB,SAAjB,CAAjB,EAA8C,CAA9C;AACD,SAHD,MAGO;AACL,qBAAW,MAAK,KAAL,CAAW,gBAAX,CAA4B,MAA5B,CAAmC,SAAnC,CAAX;AACD;AACF,OARD,MAQO;AACL;AACA,YAAI,CAAC,aAAa,QAAb,CAAsB,SAAtB,CAAL,EAAuC;AACrC,qBAAW,CAAE,SAAF,CAAX;AACD;AACF;;AAED,YAAK,QAAL,CAAc,EAAE,kBAAkB,QAApB,EAAd;AACA;AACA,cAAQ,GAAR,CAAY,4BAA4B,SAAxC;AAED,KApCa;;AAAA,UAuCd,eAvCc,GAuCI,UAAC,SAAD,EAAe;AAC/B,cAAQ,GAAR,CAAY,8BAA8B,SAA1C;AACA,cAAQ,GAAR,CAAY,MAAK,KAAjB;AACA,YAAK,KAAL,CAAW,SAAX,CAAqB,IAArB,CACE,sCAAmB,SAAnB,CADF;AAGD,KA7Ca;;AAAA,UAgDd,wBAhDc,GAgDa,YAAM;AAC/B,cAAQ,GAAR,CAAY,aAAZ;AACA,YAAK,KAAL,CAAW,SAAX,CAAqB,IAArB,CACE,+CAA4B,MAAK,KAAL,CAAW,gBAAvC,CADF;AAGA,YAAK,QAAL,CAAc,EAAE,kBAAkB,EAApB,EAAd;AACD,KAtDa;;AAAA,UAyDd,6BAzDc,GAyDkB,UAAC,KAAD,EAAQ,OAAR,EAAoB;AAClD,UAAI,MAAM,WAAN,CAAkB,gBAAtB,EAAwC;AACtC;AACD;;AAED,UAAI,WAAW,MAAK,KAAL,CAAW,gBAA1B;;AAEA;AACA,YAAK,KAAL,CAAW,SAAX,CAAqB,IAArB,CACE,oDAAiC,OAAjC,EAA0C,QAA1C,CADF;;AAIA,YAAK,QAAL,CAAc,EAAE,kBAAkB,EAApB,EAAd;AACA,cAAQ,GAAR,CAAY,2BAA2B,OAAvC;AACD,KAvEa;;AAAA,UAyEd,QAzEc,GAyEH,UAAC,IAAD,EAAU;AACnB;AACA,YAAK,KAAL,CAAW,SAAX,CAAqB,IAArB,CACE,gCADF;AAGA,cAAQ,GAAR,CAAY,aAAZ;AACA;AAED,KAjFa;;AAAA,UAmFd,WAnFc,GAmFA,UAAC,OAAD,EAAa;AACzB;AACA,YAAK,KAAL,CAAW,SAAX,CAAqB,IAArB,CACE,kCAAc,OAAd,CADF;AAGD,KAxFa;;AAEZ,UAAK,KAAL,GAAa;AACX,gBAAU,EADC;AAEX,cAAQ,EAFG;AAGX,wBAAkB;AAHP,KAAb;;AAMA;AACA,UAAK,MAAL,GAAc,EAAd;AATY;AAUb;;AAED;AACA;;;AAyBA;;;AASA;;;AASA;;;;;6BAkCS;AACP,cAAQ,GAAR,CAAY,KAAK,OAAjB;AACA,UAAM,QAAQ;AACZ,cAAM;AACJ,iBAAO;AADH;AADM,OAAd;AAKA,aACE;AAAA;AAAA;AACE,iBAAO;AACL,2BAAe;AADV;AADT;AAKE;AACE,iBAAQ;AAAA;AAAA;AAAM,gEAAN;AAAA;AAAA,WADV;AAEE,oBAAS;AACT;AAHF,UALF;AAUE;AACE,iBACE;AAAA;AAAA;AACE,6DAAO,OAAO,MAAM,IAApB,GADF;AAEE,sEAAgB,kCAAW,MAAM,IAAjB,IAAuB,aAAa,EAApC,GAAhB,GAFF;AAAA;AAAA,WAFJ;AAQE,oBAAS;AARX,UAVF;AAoBE;AAAA;AAAA;AACE;AACE,sBAAU,KAAK,KAAL,CAAW;AADvB;AADF,SApBF;AA0BE;AACE,iBACE;AAAA;AAAA;AACE,6DAAO,OAAO,MAAM,IAApB,GADF;AAEE,gEAAU,kCAAW,MAAM,IAAjB,IAAuB,aAAa,EAApC,GAAV,GAFF;AAAA;AAAA,WAFJ;AAQE,oBAAS;AARX,UA1BF;AAqCE;AACE,oBAAU,KAAK,KAAL,CAAW,QADvB;AAEE,4BAAkB,KAAK,KAAL,CAAW,gBAF/B;AAGE,oCAA2B,KAAK,wBAHlC;AAIE,4BAAmB,KAAK;AAJ1B,UArCF;AA4CE;AAAA;AAAA;AACE;AACA;AACA,mBAAO;AACL,wBAAU,KADL;AAEL,sBAAQ,MAFH;AAGL,yBAAW;AAHN;AAHT;AASE;AAAA;AACE;AADF;AAAA,cAEE,SAAU,KAAK,QAFjB;AAGE,+BAAiB,SAHnB;AAIE,qBAAO;AACL,wBAAQ,EADH;AAEL;AACA,8BAAc;AAHT;AAJT;AAUE;AAAA;AAAA;AACE,uBAAO;AACL,+BAAa,EADR;AAEL,gCAAc;AAFT;AADT;AAME,kEAAU,OAAO;AACf,4BAAU,UADK;AAEf,uBAAK,CAFU;AAGf,+BAAa;AAHE,iBAAjB,GANF;AAAA;AAAA;AAVF,WATF;AAkCE;AACE,sBAAU,KAAK,KAAL,CAAW,QADvB;AAEE,oBAAQ,KAAK,KAAL,CAAW,MAFrB;AAGE,8BAAkB,KAAK,KAAL,CAAW,gBAH/B;AAIE,yBAAa,KAAK,WAJpB;AAKE,6BAAiB,KAAK,eALxB;AAME,2CAA+B,KAAK,6BANtC;AAOE,8BAAkB,KAAK;AAPzB;AAlCF;AA5CF,OADF;AA2FD;;;;;AApOH;;;AA4BM,Y,CACG,S,GAAY;AACjB,UAAQ,iBAAU,MADD;AAEjB,sBAAoB,iBAAU;AAFb,C;AADf,Y,CAMG,Y,GAAe;AACpB,YAAU,iBAAU,MAAV,CAAiB;AADP,C;kBAqMT,Y","file":"components/admin/groups/group-manager.js","sourcesContent":["import React, { PropTypes, Component } from 'react'\n\n// groups\nimport {Card, CardActions, CardHeader, CardMedia, CardTitle, CardText} from 'material-ui/Card';\n// import FlatButton from 'material-ui/FlatButton';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport Avatar from 'material-ui/Avatar';\n\nimport Group from 'material-ui/svg-icons/social/group';\nimport GroupAdd from 'material-ui/svg-icons/social/group-add';\nimport PersonOutline from 'material-ui/svg-icons/social/person-outline';\nimport DeveloperBoard from 'material-ui/svg-icons/hardware/developer-board';\n\n// Icons\n\nimport Memory from 'material-ui/svg-icons/hardware/memory';\nimport ModeEdit from 'material-ui/svg-icons/editor/mode-edit';\nimport MoreVertIcon from 'material-ui/svg-icons/navigation/more-vert';\nimport NavigationClose from 'material-ui/svg-icons/navigation/close';\n\nimport { GroupContainer, UnassignedContainer, GroupAutomatic } from './';\n\nimport {\n  wsGroupAdd,\n  wsGroupRemove,\n  wsAssignSelectedAccountsToGroup,\n  wsUnassignSelectedAccounts,\n  wsUnassignAccount,\n} from '../../../websocket-message/server-actions'\n\nclass GroupManager extends Component {\n  static propTypes = {\n    groups: PropTypes.object,\n    unassignedAccounts: PropTypes.object,\n  };\n\n  static contextTypes = {\n    muiTheme: PropTypes.object.isRequired,\n    // wsSession: PropTypes.object,\n    // websocket: PropTypes.object,\n  };\n\n  constructor() {\n    super()\n    this.state = {\n      accounts: { },\n      groups: { },\n      selectedAccounts: [],\n    };\n\n    // Used to store references.\n    this._input = {};\n  }\n\n  // Add or remove a selection\n  // if maintainPrevSelection == true it will maintain the previus selection\n  selectAccount = ( accountId, maintainPrevSelection ) => {\n    let prevSelected = this.state.selectedAccounts\n    let selected = []\n    if (maintainPrevSelection.ctrlKey) {\n      // Alredy in the list? then remove\n      if (prevSelected.includes(accountId)) {\n        selected = prevSelected\n        selected.splice( selected.indexOf(accountId), 1 )\n      } else {\n        selected = this.state.selectedAccounts.concat(accountId)\n      }\n    } else {\n      // If not selected select\n      if (!prevSelected.includes(accountId)) {\n        selected = [ accountId ]\n      }\n    }\n\n    this.setState({ selectedAccounts: selected })\n    // debugger\n    console.log('select an account!!! > ' + accountId)\n\n  }\n\n  // Free an account from group\n  unassignAccount = (accountId) => {\n    console.log('unassign an account!!! > ' + accountId)\n    console.log(this.props)\n    this.props.wsSession.send(\n      wsUnassignAccount( accountId )\n    )\n  }\n\n  // Free the selected accounts from groups\n  unassignSelectedAccounts = () => {\n    console.log('unassign!!!')\n    this.props.wsSession.send(\n      wsUnassignSelectedAccounts( this.state.selectedAccounts )\n    )\n    this.setState({ selectedAccounts: [] })\n  }\n\n  // Free the selected accounts from groups\n  assignSelectedAccountsToGroup = (event, groupId) => {\n    if (event.nativeEvent.defaultPrevented) {\n      return\n    }\n\n    let selected = this.state.selectedAccounts\n\n    // send selection and groupid to server\n    this.props.wsSession.send(\n      wsAssignSelectedAccountsToGroup( groupId, selected )\n    )\n\n    this.setState({ selectedAccounts: [] })\n    console.log('assign to group !!! > ' + groupId)\n  }\n\n  addGroup = (name) => {\n    // send WsAddGroup\n    this.props.wsSession.send(\n      wsGroupAdd()\n    )\n    console.log('addgroup!!!')\n    // console.log(this.props)\n\n  }\n\n  removeGroup = (groupId) => {\n    // send WsAddGroup\n    this.props.wsSession.send(\n      wsGroupRemove(groupId)\n    )\n  }\n\n  render() {\n    console.log(this.context)\n    const style = {\n      gray: {\n        color: '#565555'\n      }\n    }\n    return (\n      <Card\n        style={{\n          paddingBottom: 20,\n        }}\n      >\n        <CardHeader\n          title={ <span><Group /> Groups manager </span> }\n          subtitle=\"Groups manager\"\n          // avatar=\"images/jsa-128.jpg\"\n        />\n        <CardTitle\n          title={\n            <span>\n              <Group style={style.gray} />\n              <DeveloperBoard style={{...style.gray, marginRight: 10}} />\n              Groups automated\n            </span>\n          }\n          subtitle=\"Groups creation with AI help\"\n        />\n        <div>\n          <GroupAutomatic\n            accounts={this.props.accounts}\n          />\n        </div>\n\n        <CardTitle\n          title={\n            <span>\n              <Group style={style.gray} />\n              <ModeEdit style={{...style.gray, marginRight: 10}} />\n              Groups customization\n            </span>\n          }\n          subtitle=\"Groups manual fine customization\"\n        />\n\n        <UnassignedContainer\n          accounts={this.props.accounts}\n          selectedAccounts={this.state.selectedAccounts}\n          unassignSelectedAccounts={ this.unassignSelectedAccounts }\n          selectionHandler={ this.selectAccount }\n        />\n\n        <div\n          // Assign Groups\n          // Groups Chips\n          style={{\n            minWidth: '95%',\n            margin: '2.5%',\n            marginTop: 65,\n          }}\n        >\n          <RaisedButton\n            // Add group button\n            onClick={ this.addGroup }\n            backgroundColor={'#ddffb1'}\n            style={{\n              height: 36,\n              // minWidth: '95%',\n              marginBottom: 20,\n            }}\n          >\n            <span\n              style={{\n                paddingLeft: 10,\n                paddingRight: 10,\n              }}\n            >\n              <GroupAdd style={{\n                position: 'relative',\n                top: 6,\n                marginRight: 7,\n              }}/>\n              Add group\n            </span>\n          </RaisedButton>\n\n          <GroupContainer\n            accounts={this.props.accounts}\n            groups={this.props.groups}\n            selectedAccounts={this.state.selectedAccounts}\n            removeGroup={this.removeGroup}\n            unassignAccount={this.unassignAccount}\n            assignSelectedAccountsToGroup={this.assignSelectedAccountsToGroup}\n            selectionHandler={this.selectAccount}\n          />\n        </div>\n      </Card>\n    )\n  }\n}\n\nexport default GroupManager\n"],"sourceRoot":"/source/"}