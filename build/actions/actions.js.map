{"version":3,"sources":["actions/actions.js"],"names":["registerAccount","loginAccount","accountsAdd","accountsUpdate","accountsRemove","groupsAdd","groupsRemove","groupsAddAccount","groupsRemoveAccount","moveAccounFromGroup","storeStateWithoutWebSocket","synchronize","REGISTER_ACCOUNT","LOGIN_ACCOUNT","account","type","login","ACCOUNTS_ADD","ACCOUNTS_UPDATE","ACCOUNTS_REMOVE","payload","GROUPS_ADD","GROUPS_REMOVE","GROUPS_ADD_ACCOUNT","GROUPS_REMOVE_ACCOUNT","GROUPS_SELECTED_ACCOUNTS_TO_GROUP","GROUPS_SELECTED_ACCOUNTS_UNASSIGN","GROUPS_ACCOUNTS_UNASSIGN","GROUPS_AUTOMATE_CREATION","groupId","list","accounId","toGroup","dispatch","getState","cState","accounts","console","log","group","SEND_ALL_MESSAGE","SEND_GROUP_MESSAGE","SEND_ACCOUNT_MESSAGE","state","copyWithoutWS","vervose","time","key","forEach","id","ws","timeEnd","WAIT","CONTINUE","action"],"mappings":"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","file":"actions/actions.js","sourcesContent":["// SErver actions\n\n// Register a new account in the db and add to the account list\nexport const REGISTER_ACCOUNT = 'REGISTER_ACCOUNT'\n\n// Check the account and add to the account list\nexport const LOGIN_ACCOUNT = 'LOGIN_ACCOUNT'\n\nexport function registerAccount(account) {\n  return { type: REGISTER_ACCOUNT, account }\n}\n\nexport function loginAccount(login) {\n  return { type: LOGIN_ACCOUNT, login }\n}\n\n\n// Redux: Admin accounts in the server\nexport const ACCOUNTS_ADD = 'ACCOUNTS_ADD'\nexport const ACCOUNTS_UPDATE = 'ACCOUNTS_UPDATE'\nexport const ACCOUNTS_REMOVE = 'ACCOUNTS_REMOVE'\n\nexport function accountsAdd(account) {\n  return { type: ACCOUNTS_ADD, payload: account }\n}\nexport function accountsUpdate(account) {\n  return { type: ACCOUNTS_UPDATE, payload: account }\n}\nexport function accountsRemove(account) {\n  return { type: ACCOUNTS_REMOVE, payload: account }\n}\n\n// Create a group of accounts\nexport const GROUPS_ADD = 'GROUPS_ADD'\nexport const GROUPS_REMOVE = 'GROUPS_REMOVE'\n\nexport const GROUPS_ADD_ACCOUNT = 'GROUPS_ADD_ACCOUNT'\nexport const GROUPS_REMOVE_ACCOUNT = 'GROUPS_REMOVE_ACCOUNT'\nexport const GROUPS_SELECTED_ACCOUNTS_TO_GROUP = 'GROUPS_SELECTED_ACCOUNTS_TO_GROUP'\nexport const GROUPS_SELECTED_ACCOUNTS_UNASSIGN = 'GROUPS_SELECTED_ACCOUNTS_UNASSIGN'\nexport const GROUPS_ACCOUNTS_UNASSIGN = 'GROUPS_ACCOUNTS_UNASSIGN'\nexport const GROUPS_AUTOMATE_CREATION = 'GROUPS_AUTOMATE_CREATION'\n\nexport function groupsAdd({groupId, type, list=[],}) {\n  return { type: GROUPS_ADD, payload: { groupId, type, list } }\n}\nexport function groupsRemove(groupId) {\n  return { type: GROUPS_REMOVE, payload: { groupId } }\n}\n\nexport function groupsAddAccount(groupId, account) {\n  return { type: GROUPS_ADD_ACCOUNT, payload: { groupId, account } }\n}\n// export function groupsUpdateAccount((groupId, account) {\n//   return { type: ACCOUNTS_UPDATE, payload: account }\n// }\nexport function groupsRemoveAccount(groupId, account) {\n  return { type: GROUPS_REMOVE_ACCOUNT, payload: { groupId, account } }\n}\n\n// Thunk, to move an account betwen groups.\nexport function moveAccounFromGroup(accounId, toGroup) {\n  return (dispatch, getState) => {\n    // cState = current state\n    let cState = getState()\n    if (!cState.accounts[accounId]) {\n      console.log('Account not found')\n      console.log(cState)\n\n      return\n    }\n\n    if (cState.accounts[accounId].group) {\n      // Remove account from it the actual group\n      dispatch(\n        groupsRemoveAccount(cState.accounts[accounId].group, accounId)\n      )\n    }\n    // Add the group to the account\n    dispatch( accountsUpdate({ ...cState.accounts[accounId], group: toGroup}) )\n    // Add the account to the group\n    dispatch( groupsAddAccount(toGroup, accounId) )\n  }\n}\n\nexport const SEND_ALL_MESSAGE = 'SEND_GROUP_MESSAGE'\nexport const SEND_GROUP_MESSAGE = 'SEND_GROUP_MESSAGE'\nexport const SEND_ACCOUNT_MESSAGE = 'SEND_ACCOUNT_MESSAGE'\n\nexport function storeStateWithoutWebSocket(state) {\n  let copyWithoutWS = {}\n  let vervose = true\n  if (vervose) {\n    console.log('XXXXXXXresult')\n    console.log(state)\n    console.time('time1')\n  }\n  for(let key in state) {\n    if (key == 'accounts') {\n      copyWithoutWS[key] = {}\n      copyWithoutWS[key].list = state[key].list\n      state.accounts.list.forEach( (id) => { copyWithoutWS.accounts[id] = {...state.accounts[id], ws: null} } )\n      // remove ws from accounts before send\n      copyWithoutWS.accounts.list.forEach( (id) => { delete copyWithoutWS.accounts[id].ws } )\n    } else {\n      copyWithoutWS[key] = state[key]\n    }\n  }\n  if (vervose) {\n    console.timeEnd('time1')\n    console.log(copyWithoutWS)\n    console.log(state)\n  }\n\n  return copyWithoutWS\n}\n\n/*\n * action creators\n */\n\n\nexport const WAIT = 'WAIT'\nexport const CONTINUE = 'CONTINUE'\n\nexport function synchronize( action ) {\n  switch (action) {\n    case 'wait':\n    case 'await':\n      return { type: WAIT }\n    case 'continue':\n      return { type: CONTINUE }\n    default:\n      return { type: WAIT }\n  }\n}\n"],"sourceRoot":"/source/"}